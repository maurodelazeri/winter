CREATE KEYSPACE IF NOT EXISTS elliptor WITH replication = { 'class': 'SimpleStrategy', 'replication_factor': '2' };

USE elliptor;

CREATE TABLE users (
	id uuid,
	enabled text,
	type text,
	PRIMARY KEY (id)
);
CREATE INDEX usersUsername ON elliptor.users (username);

CREATE TABLE accounts (
	id uuid,
	username text,
	name text,
	PRIMARY KEY (id)
);

CREATE TABLE balances (
	id uuid,
	account uuid,
	symbol text,
	PRIMARY KEY (id)
);
CREATE INDEX balancesSymbol ON elliptor.balances (symbol);
CREATE INDEX balancesAccount ON elliptor.balances (account);

CREATE TABLE venue (
    id uuid,
    enabled boolean,
    name text,
    description text,
    api_key text,
    api_secret text,
    passphrase text
  PRIMARY KEY (id, name)
);

CREATE TABLE symbols (
    id uuid,
    enabled boolean,
    name text,
    venue text,
	withdraw_fee double,
	deposit_fee double,
	network_fee double,    
  PRIMARY KEY (id, name)
);

CREATE TABLE products (
    id uuid,
    enabled boolean,
    venue text,
    pair text,
	pair_venue text,
	websocket_dedicated boolean,
	minimum_order_size double,
	step_size double,
	maker_fee double,
	taker_fee double,
  PRIMARY KEY (id, name)
);


CREATE TABLE events (
    id uuid,
  	venue text,
    event text,
    user uuid,
    account uuid,
	strategy uuid,
	container text,	
	timestamp bigint,
	command text,
	error boolean,
	payload text,
  PRIMARY KEY (id, event)
);

CREATE TABLE orders (
    id uuid,
    venue text,
    account uuid,
    strategy uuid,
	product text,
	amount text,	
	price double,
	funds double,
	side_order text,
	type_orer text,
	parent_order uuid,
	expiration text,
	status text,	
  PRIMARY KEY (id)
);